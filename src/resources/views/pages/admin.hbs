<div class="grid wide table-admin">
    <h3>Mặt hàng của tôi</h3>

    <table>
        <thead>
            <tr>
                <th class="table-admin__stt">#</th>
                <th class="table-admin__name">Name</th>
                <th class="table-admin__price">Giá</th>
                <th class="table-admin__type" colspan="2">Loại</th>
            </tr>
        </thead>
        <tbody>
            {{#each phones}}
            <tr>
                <th>{{sum @index 1}}</th>
                <td>{{this.name}}</td>
                <td>{{this.price}}</td>
                <td>{{this.type}}</td>
                <td>
                    <a href="/admin/{{this._id}}/edit" class="btn-create">Sửa</a>
                    <a href="" class="btn-delete" data-id="{{this._id}}">Xóa</a>
                </td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</div>

<div class="modal">
    <div class="modal-container">
        <div class="modal-container-title">
            <h3>Xóa Điện Thoại</h3>
            <span>&times;</span>
        </div>
        <p>Bạn chắc chắn muốn xóa chứ?</p>
        <div class="modal-container-btn">
            <button class="btn-danger">Xóa bỏ</button>
            <button class="btn-cancel">Hủy</button>
        </div>
    </div>
</div> 

<form name="formDelete" method="post"></form>

<script>
    const btns = document.querySelectorAll('.btn-delete')
    const modal = document.querySelector('.modal')
    const btnCancel = document.querySelector('.btn-cancel')
    const cancel = document.querySelector('.modal-container-title span')
    const formDelete = document.forms['formDelete']
    const btnDanger = document.querySelector('.btn-danger')

    btns.forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.preventDefault();
            modal.style.display = 'flex'
            let phoneId = e.target.dataset.id
            btnDanger.addEventListener('click', () => {
                formDelete.action = `/admin/${phoneId}/delete?_method=delete`
                formDelete.submit()
            })
        })
    })
    btnCancel.addEventListener('click', () => {
        modal.style.display = 'none'
    })
    cancel.addEventListener('click', () => {
        modal.style.display = 'none'
    })

</script>
